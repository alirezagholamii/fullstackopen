(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var c=t(17),r=t.n(c),o=t(18),a=t(3),u=t(1),s=t(0),i=function(e){var n=e.persons,t=e.handleDelete;return Object(s.jsx)(s.Fragment,{children:n.map((function(e){return Object(s.jsxs)("div",{children:[e.name," ",e.number," ",Object(s.jsx)("button",{onClick:function(){t(e)},children:"delete"})]},e.name)}))})},l=function(e){var n=e.persons,t=e.handleSetPersons,c=e.handleUpdatePerson,r=Object(u.useState)(""),o=Object(a.a)(r,2),i=o[0],l=o[1],d=Object(u.useState)(""),f=Object(a.a)(d,2),j=f[0],h=f[1];return Object(s.jsxs)("form",{onSubmit:function(e){(e.preventDefault(),""!==i)&&(n.some((function(e){return e.name===i}))?window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))&&(c({name:i,number:j}),l(""),h("")):(l(""),h(""),t({name:i,number:j})))},children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:i,onChange:function(e){l(e.target.value)}})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:j,onChange:function(e){h(e.target.value)}})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.handeChangeFilter;return Object(s.jsx)("div",{children:Object(s.jsxs)("div",{children:["filter shown with: ",Object(s.jsx)("input",{onChange:function(e){n(e.target.value)}})]})})},f=function(e){var n=e.message,t=e.messageType;return null===n?null:Object(s.jsx)("div",{className:t,children:n})},j=t(4),h=t.n(j),b="/api/persons",m={getPersons:function(){return h.a.get(b).then((function(e){return e.data}))},addPerson:function(e){return h.a.post(b,e).then((function(e){return e.data}))},deletePerson:function(e){var n=e.id;return h.a.delete("".concat(b,"/").concat(n)).then((function(e){return e.data}))},updatePerson:function(e,n){return h.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))}},O=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)([]),j=Object(a.a)(r,2),h=j[0],b=j[1],O=Object(u.useState)(null),p=Object(a.a)(O,2),v=p[0],x=p[1],g=Object(u.useState)(null),w=Object(a.a)(g,2),P=w[0],S=w[1],y=function(e,n){x(e),S(n)};Object(u.useEffect)((function(){m.getPersons().then((function(e){c(e)})).catch((function(e){console.log(e)}))}),[]),Object(u.useEffect)((function(){b(t.concat())}),[t]);return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(f,{message:v,messageType:P}),Object(s.jsx)(d,{handeChangeFilter:function(e){var n=t.filter((function(n){return n.name.toLowerCase().includes(e.toLowerCase())}));b(n)}}),Object(s.jsx)("h3",{children:"Add a new"}),Object(s.jsx)(l,{handleSetPersons:function(e){m.addPerson(e).then((function(n){y("Added ".concat(e.name),"success"),c(t.concat(n)),setTimeout((function(){y(null,null)}),5e3)})).catch((function(e){console.log(e.response.data),y(e.response.data.error,"error"),setTimeout((function(){y(null,null)}),5e3)}))},persons:t,handleUpdatePerson:function(e){var n,r="",a=Object(o.a)(t);try{for(a.s();!(n=a.n()).done;){var u=n.value;u.name===e.name&&(r=u.id)}}catch(s){a.e(s)}finally{a.f()}m.updatePerson(r,e).then((function(e){var n=t.map((function(n){return n.id===e.id?e:n}));c(n)})).catch((function(e){console.log(e),y(e.response.data.error,"error"),setTimeout((function(){y(null,null)}),5e3)}))}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(i,{persons:h,handleDelete:function(e){window.confirm("Delete ".concat(e.name," ?"))&&m.deletePerson(e).then((function(n){var r=t.filter((function(n){return n.id!==e.id}));c(r)})).catch((function(n){console.log(n),y("Information of ".concat(e.name," has already been removed from server"),"error"),setTimeout((function(){y(null,null)}),5e3)}))}})]})};t(42);r.a.render(Object(s.jsx)(O,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.a07232e4.chunk.js.map